<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>物品详情 - "真理"</title>
<style>
  hr{
    margin: 20px 0;
  }
    ul {
    list-style-type: none;  /* 去除小圆点 */
    padding-left: 0;        /* 去除默认的左内边距 */
  }
</style>
  <link rel="stylesheet" href="../main.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <button class="sidebar-toggle">目录</button>

  <nav>
    <a href="../index.html">首页</a>
    <a href="../astesia.html">星极</a>
    <a href="../astgenne.html">星源</a>
  </nav>

  <div id="sidebar-placeholder"></div>

  <main>
    <h1 style="font-size: 48px;">“同一片星空下”</h1>
    <h3 style="margin-bottom: 20px;">“我们”的力量。</h3>
    <div class="main-container">

      <div class="left-container">
        <div class="avatar-container">
          <img src="../image/astesia2.webp" alt="星极" width="40px" height="40px" class="avatar" data-character="astesia">
          <img src="../image/astgenne2.webp" alt="星源" width="40px" height="40px" class="avatar" data-character="astgenne">
          <img src="../image/48px-Wilson_Portrait.webp" alt="威尔逊" width="40px" height="40px" class="avatar" data-character="wilson">


        </div>
        <div class="description-container" id="characterDescription">
          <!-- 角色描述将在这里动态显示 -->
        </div>
        <div class="analysis-container">
          <ul>
            <li style="margin-bottom: 20px;"><span class="color-important">“同一片星空下”（ast_understar）</span>是一种仅【星极】【星源】可使用的物品。</li>
            <li>用于与【星极】/【星源】绑定，进入【共鸣】状态。</li>
            <li>拥有技能【星光的回响】，仅在双方处于【共鸣】状态中时可使用。
                携带在物品栏中时右键此物品，即可发起传送的请求，另一位玩家对其右键，即可接受该次请求，
                令<span class="color-important">前者（发起者）</span>立刻传送至<span class="color-important">后者（接受者）</span>
                所在的方位，并使该技能进入冷却。（初始/后续冷却为4分钟。）
              </li>
            <li>初始该物品处于未【记录】状态，<br>
              <span class="color-important2">①手持该物品对自己右键可【记录】自己为【共鸣者1】。</span><br>
              在仅记录【共鸣者1】的情况下再次对自己右键可取消【记录】。在已被记录为【共鸣者1】的状态下无法再使用另一个处于未【记录】状态的该物品进行记录。<br>
              <span class="color-important2">②在两个此物品都各自记录了【共鸣者1】，并且为【星极】【星源】各一位后，
                手持其中一个物品对另一个物品右键，即可进行【绑定】，并为两个此物品相互记录对方为【共鸣者2】。</span><br>
              完成以上的操作之后，两位玩家视为处于同一个【共鸣】状态中，可享受各方面的额外效果。在这种状态中，再次手持其中一个对另一个右键，即可取消此【共鸣】状态，并取消【共鸣者2】的记录。<br>
            <hr>
            <li>不要拿反了，拿反了可以触发请求传送动作但无法激活“同一片星空下”。</li>
            <li>传送是一个非常好用的技能，赶路、避险都可以用到。</li>
          </ul>

        </div>
      </div>
      <div class="right-container">
        <h2 style="color: #007acc;">“同一片星空下”</h2>
        <p>ast_understar</p>
        <hr>
        <img src="../image/ast_understar_inactive.webp" alt="同一片星空下" width="100px">
        <hr>
        <p>分类：物品/功能</p>
        <p>解锁方式：“真理”</p>
        <p>制作材料：<br>
              ①指南针*1<br>
              ②告密的心*2<br>
              ③哀悼荣耀*9<br>
              ④生物数据*9</p>
      </div>
    </div>
    
  </main>

  <script>
    // 角色描述数据
    const characterDescriptions = {
      astesia: "当前共鸣者1：%s\n当前共鸣者2：%s",
      astgenne: "当前共鸣者1：%s\n当前共鸣者2：%s",
      wilson: "似乎相互之间可以建立起特殊的联系。"

    };

    // 获取DOM元素
    const avatars = document.querySelectorAll('.avatar');
    const descriptionContainer = document.getElementById('characterDescription');

    // 随机选择初始角色
    function initializeRandomCharacter() {
      const characters = Object.keys(characterDescriptions);
      const randomCharacter = characters[Math.floor(Math.random() * characters.length)];
      showCharacterDescription(randomCharacter);
      updateActiveAvatar(randomCharacter);
    }

    // 显示角色描述
    function showCharacterDescription(character) {
      descriptionContainer.textContent = characterDescriptions[character];
    }

    // 更新活跃的头像样式
    function updateActiveAvatar(character) {
      avatars.forEach(avatar => {
        if (avatar.dataset.character === character) {
          avatar.classList.add('active');
        } else {
          avatar.classList.remove('active');
        }
      });
    }

    // 为每个头像添加点击事件
    avatars.forEach(avatar => {
      avatar.addEventListener('click', () => {
        const character = avatar.dataset.character;
        showCharacterDescription(character);
        updateActiveAvatar(character);
      });
    });

    // 页面加载时初始化随机角色
    window.addEventListener('DOMContentLoaded', initializeRandomCharacter);
  

fetch("./sidebar.html")
  .then(response => response.text())
  .then(html => {
    document.getElementById("sidebar-placeholder").innerHTML = html;

    // 目录内容加载完毕后，绑定折叠事件
    const toggleBtn = document.querySelector(".sidebar-toggle");
    const sidebar = document.querySelector(".sidebar");
    if (!toggleBtn || !sidebar) {
      console.error("找不到 sidebar-toggle 或 sidebar 元素");
      return;
    }
    toggleBtn.addEventListener("click", () => {
      sidebar.classList.toggle("active");
    });
  })
  .catch(err => console.error("加载 sidebar 失败:", err));

</script>
</body>
</html>
